# Моя коллекция монет
Сайт, представляющий коллекцию монет.  
Сайт разделён на части:
- публичную;
- панель администратора, защищённую логином и паролем.  
Через панель администратора добавляются сведения о монетах, изменяются данные, удаляются.  
Через публичную часть сайта можно просмотреть коллекцию моент но в ограниченном объёме, часть характеристик моенты доступна только панель администратора.  
Можно добавлять для каждой монеты статью, и seo данные.

## Требования
- PHP 8.0 или выше  
- Composer  
- Git  
- MySQL

## Установка
При помощии git клонируйте репозиторий

    git clone https://github.com/mldanshin/coins

Установите зависимости с помощью composer

    composer install --optimize-autoloader --no-dev

Создайте символьную ссылку

    ln -s ../storage/app/public public/storage

Создайте базу данных с кодировкой utf8mb4_general_ci.  

Создайте на основе файла .env.example файл .env, 

    cp .env.example .env

заполните поля:

- APP_URL=

- DB_DATABASE=
- DB_USERNAME=
- DB_PASSWORD=

- MAIL_HOST=
- MAIL_PORT=
- MAIL_USERNAME=
- MAIL_PASSWORD=
- MAIL_FROM_ADDRESS=

- DANSHIN_COMMENT_MAIL_REPLAY_TO_ADDRESS= //адрес электронной почты получателя сообщений для пакета 'comment'

Подробнее о пакете comment здесь: https://github.com/mldanshin/package-comment.

**Важно! Заполнение указаных полей в файле .env является обязательным!**

Выполните миграцию

    php artisan migrate

Засейте базу данных начальными данными

    php artisan db:seed

Создайте администратора, заполнив таблицу user в базе данных. *Учтите, что пароль должен быть хэшированным!*
Для хэширования используйте метод make() фасада Illuminate\Support\Facades\Hash

    use Illuminate\Support\Facades\Hash;
    Hash::make("password");

Добавьте в планировщик заданий выполнение команд, для удаления временных данных, обновления карты сайта  
- comment:cut
- picture:clear
- sitemap:generate

## Использование
На публичной части сайта поддерживаются локализации: en, ru, в административной панели только локализация ru.  
Пока поддерживается создание статьи и seo данных только с локализацией ru.  
Из панели администратора CRUD операции возможны только к монете. Операции CRUD с параметрами, описывающим монету (например "страна"), возможны только напрямую с базой данных.  
На публичной части и административной панели поддерживается фильтрация, упорядочивание коллекции монет. Текстовый поиск не реализован.  

### Консольные команды
- php artisan comment:clear //очищает файл комментариев
- php artisan comment:cut //вырезает из файла комментарии до установленного размера, направяя вырезанную часть на электронную почту
- php artisan picture:clear //очищает временную директорию хранения изображений
- php artisan sitemap:generate //генерирует карту сайта

## Тестирование
Для запуска тестов выполните  

    php artisan test

## Демонстрационный сайт
https://demo-coins.danshin.net  
Логин: user  
Пароль: demo  

## Контакты
mail@danshin.net

## Лицензия

Программное обеспечение с открытым исходным кодом, лицензированное в соответствии с [MIT license](https://opensource.org/licenses/MIT).
